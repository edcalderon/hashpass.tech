// Version Configuration for BSL 2025 HashPass App
// Semantic Versioning: MAJOR.MINOR.PATCH

import packageJson from '../package.json';

export interface VersionInfo {
  version: string;
  buildNumber: number;
  releaseDate: string;
  releaseType: 'stable' | 'beta' | 'rc' | 'alpha';
  environment: 'development' | 'staging' | 'production';
  features: string[];
  bugfixes: string[];
  breakingChanges: string[];
  notes: string;
}

export interface VersionHistory {
  [version: string]: VersionInfo;
}

// Current Version Configuration - Auto-synced with package.json
export const CURRENT_VERSION: VersionInfo = {
  version: packageJson.version,
  buildNumber: 202510272149, // Updated to current date
  releaseDate: '2025-10-27',
  releaseType: 'beta',
  environment: process.env.NODE_ENV === 'production' ? 'production' : 'development',
  features: [
    'User pass management system',
    'BSL 2025 event integration',
    'Speaker profile system with avatars',
    'Event agenda with live updates',
    'Unified search and filter system',
    'Dark mode support',
    'Event banner component',
    'Pass card UI with BSL branding',
    'Agenda tabbed interface',
    'Real-time countdown system',
    'Meeting request system with Supabase integration',
    'Speaker availability and booking system',
    'NEW: Complete networking center with horizontal scrolling',
    'NEW: My Requests view for managing sent meeting requests',
    'NEW: My Schedule view for scheduled meetings',
    'NEW: System Analytics with comprehensive statistics',
    'NEW: Blocked Users management system',
    'NEW: Horizontal scrolling quick access menu',
    'NEW: Enhanced networking statistics and insights',
    'NEW: Speaker dashboard for incoming request management',
    'NEW: Real-time networking activity tracking'
  ],
  bugfixes: [
    'Fixed SVG logo rendering issues',
    'Resolved TypeScript undefined property errors',
    'Fixed agenda data grouping logic',
    'Corrected speaker count discrepancies',
    'Fixed dark mode contrast issues',
    'Resolved navigation routing problems',
    'Fixed Lambda deployment parameter issues',
    'Updated AWS SDK to v3 for better performance',
    'Resolved CloudFormation stack deployment errors',
    'Fixed 404 errors in Supabase database functions',
    'Resolved UUID/TEXT type mismatch in meeting request system',
    'Fixed can_make_meeting_request function type casting issues',
    'Updated database functions to handle mixed column types properly',
    'Fixed React Navigation headerBackTitleVisible property error',
    'Fixed headerStyle borderBottomWidth property error',
    'Fixed pass number display showing "unknown" in explorer view',
    'Fixed speaker dashboard loading stuck issue',
    'Fixed get_speaker_meeting_requests SQL GROUP BY error',
    'Improved networking icon visibility in quick access menu'
  ],
  breakingChanges: [],
  notes: 'Updated version display and changelog automation'
};

// Version History
export const VERSION_HISTORY: VersionHistory = {
  '1.3.2': {
    version: '1.3.2',
    buildNumber: 202510272149,
    releaseDate: '2025-10-27',
    releaseType: 'beta',
    environment: process.env.NODE_ENV === 'production' ? 'production' : 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system',
      'Meeting request system with Supabase integration',
      'Speaker availability and booking system',
      'Complete networking center with horizontal scrolling',
      'My Requests view for managing sent meeting requests',
      'My Schedule view for scheduled meetings',
      'System Analytics with comprehensive statistics',
      'Blocked Users management system',
      'Horizontal scrolling quick access menu',
      'Enhanced networking statistics and insights',
      'Speaker dashboard for incoming request management',
      'Real-time networking activity tracking'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems',
      'Fixed React Navigation headerBackTitleVisible property error',
      'Fixed headerStyle borderBottomWidth property error',
      'Fixed pass number display showing "unknown" in explorer view',
      'Fixed speaker dashboard loading stuck issue',
      'Fixed get_speaker_meeting_requests SQL GROUP BY error',
      'Improved networking icon visibility in quick access menu',
      'Updated version display and changelog automation'
    ],
    breakingChanges: [],
    notes: 'Updated version display and changelog automation'
    releaseType: 'beta',
    environment: 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems'
    ],
    breakingChanges: [],
    notes: 'Updated version display and changelog automation'
  },
  '1.2.9': {
    version: '1.2.9',
    buildNumber: 202510261852,
    releaseDate: '2025-10-26',
    releaseType: 'beta',
    environment: 'production',
    features: [],
    bugfixes: [
      'Fixed TypeScript error where \'event\' was possibly null in agenda.tsx',
      'Updated dependency array to use optional chaining for event.agenda'
    ],
    breakingChanges: [],
    notes: 'Fixed TypeScript errors and improved error handling'
  },
  '1.2.3': {
    version: '1.2.3',
    buildNumber: 202510181800,
    releaseDate: '2025-10-18',
    releaseType: 'beta',
    environment: 'development',
    features: [
      'NEW: Complete networking center with horizontal scrolling',
      'NEW: My Requests view for managing sent meeting requests',
      'NEW: My Schedule view for scheduled meetings',
      'NEW: System Analytics with comprehensive statistics',
      'NEW: Blocked Users management system',
      'NEW: Horizontal scrolling quick access menu',
      'NEW: Enhanced networking statistics and insights',
      'NEW: Speaker dashboard for incoming request management',
      'NEW: Real-time networking activity tracking'
    ],
    bugfixes: [
      'Fixed React Navigation headerBackTitleVisible property error',
      'Fixed headerStyle borderBottomWidth property error',
      'Fixed pass number display showing "unknown" in explorer view',
      'Fixed speaker dashboard loading stuck issue',
      'Fixed get_speaker_meeting_requests SQL GROUP BY error',
      'Improved networking icon visibility in quick access menu'
    ],
    breakingChanges: [],
    notes: 'Major networking system update with comprehensive meeting request management and analytics'
  },
  '1.2.2': {
    version: '1.2.2',
    buildNumber: 202510151600,
    releaseDate: '2025-10-15',
    releaseType: 'beta',
    environment: 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system',
      'Meeting request system with Supabase integration',
      'Speaker availability and booking system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems',
      'Fixed Lambda deployment parameter issues',
      'Updated AWS SDK to v3 for better performance',
      'Resolved CloudFormation stack deployment errors',
      'Fixed 404 errors in Supabase database functions',
      'Resolved UUID/TEXT type mismatch in meeting request system',
      'Fixed can_make_meeting_request function type casting issues',
      'Updated database functions to handle mixed column types properly'
    ],
    breakingChanges: [],
    notes: 'Fixed critical 404 errors in Supabase meeting request system and resolved database type mismatches'
  },
  '1.2.1': {
    version: '1.2.1',
    buildNumber: 202510151510,
    releaseDate: '2025-10-15',
    releaseType: 'beta',
    environment: 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems',
      'Fixed Lambda deployment parameter issues',
      'Updated AWS SDK to v3 for better performance',
    ],
    breakingChanges: [],
    notes: 'UI display fixes and automatic version management'
  },
  '1.1.9': {
    version: '1.1.9',
    buildNumber: 202510151510,
    releaseDate: '2025-10-15',
    releaseType: 'beta',
    environment: 'production',
    features: [],
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems'
    ],
    breakingChanges: [],
    notes: 'UI display fixes and automatic version management'
  },
  [packageJson.version]: {
    version: packageJson.version,
    buildNumber: 202510270000,
    releaseDate: '2025-10-27',
    releaseType: 'beta',
    environment: 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems',
      'Fixed Lambda deployment parameter issues',
      'Updated AWS SDK to v3 for better performance',
      'Resolved CloudFormation stack deployment errors'
    ],
    breakingChanges: [],
    notes: 'Lambda deployment fixes and AWS SDK v3 migration for improved stability'
  },
  [packageJson.version]: {
    version: packageJson.version,
    buildNumber: 2025011501,
    releaseDate: '2025-01-15',
    releaseType: 'beta',
    environment: 'development',
    features: [
      'User pass management system',
      'BSL 2025 event integration',
      'Speaker profile system with avatars',
      'Event agenda with live updates',
      'Unified search and filter system',
      'Dark mode support',
      'Event banner component',
      'Pass card UI with BSL branding',
      'Agenda tabbed interface',
      'Real-time countdown system'
    ],
    bugfixes: [
      'Fixed SVG logo rendering issues',
      'Resolved TypeScript undefined property errors',
      'Fixed agenda data grouping logic',
      'Corrected speaker count discrepancies',
      'Fixed dark mode contrast issues',
      'Resolved navigation routing problems'
    ],
    breakingChanges: [],
    notes: 'Major UI overhaul with BSL 2025 branding and improved user experience'
  }
};

// Version Utilities
export const getVersionInfo = (version?: string): VersionInfo => {
  if (version && VERSION_HISTORY[version]) {
    return VERSION_HISTORY[version];
  }
  return CURRENT_VERSION;
};

export const getLatestVersion = (): VersionInfo => {
  return CURRENT_VERSION;
};

export const getVersionHistory = (): VersionInfo[] => {
  return Object.values(VERSION_HISTORY).sort((a, b) => 
    b.buildNumber - a.buildNumber
  );
};

export const getVersionBadgeColor = (releaseType: string): string => {
  switch (releaseType) {
    case 'stable': return '#34A853';
    case 'rc': return '#FF9500';
    case 'beta': return '#007AFF';
    case 'alpha': return '#FF3B30';
    default: return '#8E8E93';
  }
};

export const getVersionBadgeText = (releaseType: string): string => {
  switch (releaseType) {
    case 'stable': return 'STABLE';
    case 'rc': return 'RC';
    case 'beta': return 'BETA';
    case 'alpha': return 'ALPHA';
    default: return 'DEV';
  }
};

// Environment Configuration
export const ENVIRONMENT_CONFIG = {
  development: {
    showVersion: true,
    showDebugInfo: true,
    enableHotReload: true,
    logLevel: 'debug'
  },
  staging: {
    showVersion: true,
    showDebugInfo: false,
    enableHotReload: false,
    logLevel: 'info'
  },
  production: {
    showVersion: false,
    showDebugInfo: false,
    enableHotReload: false,
    logLevel: 'error'
  }
};

export default CURRENT_VERSION;
